---
const { pathname } = Astro.url;
const isWelsh = pathname.startsWith('/cy');

// Normalize pathname by removing trailing slash (optional)
const cleanPath = pathname.replace(/\/$/, '');

// Map of English <-> Welsh routes
const pathMap: Record<string, string> = {
  '/en': '/cy',
  '/en/contact': '/cy/cysylltu',
  '/en/gallery': '/cy/oriel',
  '/cy': '/en',
  '/cy/cysylltu': '/en/contact',
  '/cy/oriel': '/en/gallery',
};

// Look up the opposite path
const oppositePath = pathMap[cleanPath];

// Determine final links
const englishPath = isWelsh ? oppositePath || '/en' : pathname;
const welshPath = !isWelsh ? oppositePath || '/cy' : pathname;
---
<div class="language-switcher">
  <a href={englishPath} class:list={['lang-link', { 'is-active': !isWelsh }]}>English</a>
  <span> / </span>
  <a href={welshPath} class:list={['lang-link', { 'is-active': isWelsh }]}>Cymraeg</a>
</div>

<style>
.language-switcher {
  text-align: right;
  font-size: 0.9rem;
}
.language-switcher a {
  text-decoration: none;
  padding: 0.25rem;
}
.language-switcher a.is-active {
  font-weight: bold;
  text-decoration: underline;
  pointer-events: none;
  opacity: 0.6;
}
</style>